function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/CommentsBlockComp-CjV9T81d.js","assets/index-CfCwTioh.js","assets/index-BB_-jW8c.css","assets/CommentsBlockComp-c3YFChxu.css","assets/RatingComp-CDNZEOTy.js","assets/RatingComp-DpYnKYZV.css","assets/CarBookModalComp-Ck8cJOT9.js","assets/CarBookModalComp-q5ACaZ7U.css"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
import{B as M,d as y,m as T,A as H,c as N,_ as $,a as f,w as l,r,o as h,b as t,e as s,v as U,f as n,t as d,g as o,p as V,h as A,i as I,F as L,T as O,D as q,j as g,k as z,l as w,n as k,q as j,s as B,u as b,x as E}from"./index-CfCwTioh.js";class Z extends M{constructor(){super({text:""})}checkCommentText(a){const u=/^[a-zA-Zа-яА-Я0-9\s\.,!?()-]{1,500}$/;let c=!1;return a.text==""?this.errors.value.text="Комментарий не может быть пустым!":u.test(a.text)?(c=!0,this.errors.value.text=""):this.errors.value.text="Присутсвуют недоспутимые символы или длина комментария превышает 500 символов!",c}}const G=y({name:"CommentInputComponent",props:{car_id:{required:!0}},data:()=>({text:"",rating:0}),methods:{...T(["pushComment"]),validate(e){this.commentValidation.checkCommentText(this)&&e()},sendComment(){this.validate(()=>{H.addComment({car_id:this.car_id,text:this.text,rating:this.rating.toFixed(1)},e=>{this.$toastr.success(e.message),this.pushComment(e.data)},e=>{e.message==="token_error"?this.$toastr.error("Войдите в аккаунт, чтобы оставлять отзыв!"):N(["car_id","rating","text"],c=>{this.$toastr.error(c.pop())}).handle(e)})})}},setup(){const e=new Z;return{commentValidation:e,errors:e.getErrors()}}}),J=e=>(V("data-v-2a5bb431"),e=e(),A(),e),K=J(()=>t("div",{class:"comment-label mb-3",for:"comment__text"},[t("b",{class:"font-weight-medium"},"Оцените автомобиль"),t("p",{style:{"line-height":"1.5"}}," (Внимание! Грубые и нецензурные комментарии будут удалены) ")],-1)),Q={class:"input-box"},W={style:{"margin-top":"-5px"},class:"mb-2"},X={class:"text-red v-messages__message"},Y={class:"d-flex"};function ee(e,a,u,c,S,D){const C=r("v-rating"),v=r("v-sheet");return h(),f(v,{class:"comments-block"},{default:l(()=>[K,t("span",Q,[s(t("textarea",{id:"comment-text",rows:"6",placeholder:"Комментарий к отзыву...",name:"comment__text","onUpdate:modelValue":a[0]||(a[0]=m=>e.text=m)},`\r
          `,512),[[U,e.text]])]),s(t("div",W,[t("small",X,d(e.errors.text),1)],512),[[n,e.errors.text]]),t("div",Y,[o(C,{class:"my-1",modelValue:e.rating,"onUpdate:modelValue":a[1]||(a[1]=m=>e.rating=m),"empty-icon":"fa-regular fa-star","full-icon":"fa-solid fa-star","half-icon":"fa-solid fa-star-half-stroke","half-increments":"",density:"comfortable","active-color":"deep-orange-lighten-2",color:"#8d8a8a"},null,8,["modelValue"])]),t("button",{onClick:a[2]||(a[2]=(...m)=>e.sendComment&&e.sendComment(...m)),class:"comment-send-button text-subtitle-1 mt-2 text-white"}," Добавить отзыв ")]),_:1})}const te=$(G,[["render",ee],["__scopeId","data-v-2a5bb431"]]),oe=y({name:"CarHeaderPreloaderComponent"}),se={class:"header-text mx-auto effect-shine rounded-1"};function ae(e,a,u,c,S,D){return h(),I("div",se)}const le=$(oe,[["render",ae],["__scopeId","data-v-0815e72c"]]),ne=y({name:"CarView",components:{CarHeaderPreloaderComponent:le,FavoriteComponent:L,CommentInputComponent:te,TitleComponent:O},data:()=>({details:{model_id:0,name:"",category:"",brand:"",type:"",min_price:"",country:"",weight:0,tank:"",year:0,flag:"",img:""},preloaderShow:!0,CommentsBlock:null,RatingBlock:null,CarBookModalBlock:null}),mixins:[q],methods:{async loadCommentsBlock(){this.CommentsBlock=g(w(()=>k(()=>import("./CommentsBlockComp-CjV9T81d.js"),__vite__mapDeps([0,1,2,3]))))},async loadRatingBlock(){this.RatingBlock=g(w(()=>k(()=>import("./RatingComp-CDNZEOTy.js"),__vite__mapDeps([4,1,2,5]))))},async loadCarBookModalBlock(){this.CarBookModalBlock=g(w(()=>k(()=>import("./CarBookModalComp-Ck8cJOT9.js"),__vite__mapDeps([6,1,2,7]))))},uploadCar(e){return new Promise(a=>{z.getCarById({id:e},u=>{this.details=u.data,this.loadCommentsBlock(),this.loadRatingBlock(),this.loadCarBookModalBlock(),a()},u=>{u.response.status==404&&this.$router.push({name:"404"})})})}},created(){this.uploadCar(this.$route.params.slug).then(()=>{this.preloaderShow=!1})},beforeRouteUpdate(e,a,u){e.params.slug!==a.params.slug?(this.preloaderShow=!0,this.uploadCar(e.params.slug).then(()=>{this.preloaderShow=!1,u()})):u()}}),i=e=>(V("data-v-cfd3ee47"),e=e(),A(),e),ue={class:"car-header-wrapper position-relative"},re={class:"back-arrow position-absolute"},de={class:"text-center"},ie={class:"font-weight-medium"},ce={class:"img-wrapper position-relative"},me={class:"loader position-absolute"},pe={class:"price-block position-absolute text-center"},_e={class:"font-weight-medium"},he={class:"font-weight-bold"},fe=i(()=>t("h2",{class:"mb-4"},"Основные параметры",-1)),Ce={class:"car-specs-wrapper"},ve={class:"car-specs pa-3"},ge={class:"car-spec-col mb-1"},we=i(()=>t("small",{class:"label"},"Категория",-1)),ke={class:"small-text effect-shine rounded-1"},Be={class:"car-spec-col mb-1"},be=i(()=>t("small",{class:"label"},"Тип",-1)),ye={class:"small-text effect-shine rounded-1"},$e={class:"car-spec-col mb-1"},Se=i(()=>t("small",{class:"label"},"Год выпуска",-1)),De={class:"small-text effect-shine rounded-1"},Ee=i(()=>t("h2",{class:"mb-4"},"Дополнительные сведения",-1)),Ve=i(()=>t("thead",null,null,-1)),Ae=i(()=>t("td",{class:"px-0 pb-3"},"Страна",-1)),Ie={class:"px-0 pb-3"},Fe={class:"d-flex align-center"},xe=["src"],Re={class:"small-text effect-shine rounded-1"},Pe=i(()=>t("td",{class:"px-0 py-3"},[t("p",null,"Объем бака, л")],-1)),Me={class:"px-0 py-3"},Te={class:"small-text effect-shine rounded-1"},He=i(()=>t("td",{class:"px-0 py-3"},[t("p",null,"Масса, кг")],-1)),Ne={class:"px-0 py-3"},Ue={class:"small-text effect-shine rounded-1"};function Le(e,a,u,c,S,D){const C=r("font-awesome-icon"),v=r("router-link"),m=r("CarHeaderPreloaderComponent"),p=r("v-col"),_=r("v-row"),F=r("v-img"),x=r("FavoriteComponent"),R=r("v-table"),P=r("CommentInputComponent");return h(),I(j,null,[o(_,null,{default:l(()=>[o(p,{class:"pb-0"},{default:l(()=>[t("div",ue,[t("div",re,[o(v,{class:"back-link",to:{name:"catalog",params:{brand:this.$route.params.brand}}},{default:l(()=>[o(C,{icon:"fa-solid fa-chevron-left",size:"lg"})]),_:1},8,["to"])]),s(o(m,null,null,512),[[n,e.preloaderShow]]),s(t("div",de,[t("h2",ie,d(e.details.brand+" "+e.details.name),1)],512),[[n,!e.preloaderShow]])])]),_:1})]),_:1}),o(_,null,{default:l(()=>[o(p,{class:"pb-0 position-relative"},{default:l(()=>[t("div",ce,[s(t("div",me,null,512),[[n,e.preloaderShow]]),s(o(F,{src:e.previewPic(e.details.img),"aspect-ratio":"16/9",class:"px-3"},null,8,["src"]),[[n,!e.preloaderShow]]),e.RatingBlock?(h(),f(B(e.RatingBlock),{key:0,model_id:e.details.model_id},null,8,["model_id"])):b("",!0),t("div",pe,[t("p",_e,[E("от "),t("b",he,d(e.details.min_price)+"₽",1),E("/день")])]),o(x,{"car-view":!0,car_id:e.details.model_id},null,8,["car_id"])])]),_:1})]),_:1}),o(_,null,{default:l(()=>[o(p,null,{default:l(()=>[fe,t("div",Ce,[t("div",ve,[t("div",ge,[we,s(t("div",ke,null,512),[[n,e.preloaderShow]]),s(t("p",{class:"text"},d(e.details.category),513),[[n,!e.preloaderShow]])]),t("div",Be,[be,s(t("div",ye,null,512),[[n,e.preloaderShow]]),s(t("p",{class:"text"},d(e.details.type),513),[[n,!e.preloaderShow]])]),t("div",$e,[Se,s(t("div",De,null,512),[[n,e.preloaderShow]]),s(t("p",{class:"text"},d(e.details.year),513),[[n,!e.preloaderShow]])])])])]),_:1})]),_:1}),o(_,null,{default:l(()=>[o(p,null,{default:l(()=>[Ee,o(R,{density:"compact",class:"car-another-specs"},{default:l(()=>[Ve,t("tbody",null,[t("tr",null,[Ae,t("td",Ie,[t("div",Fe,[t("img",{class:"country-flag",src:e.itemFlag(e.details.flag),alt:"flag"},null,8,xe),s(t("div",Re,null,512),[[n,e.preloaderShow]]),s(t("p",null,d(e.details.country),513),[[n,!e.preloaderShow]])])])]),t("tr",null,[Pe,t("td",Me,[s(t("div",Te,null,512),[[n,e.preloaderShow]]),s(t("p",null,d(e.details.tank),513),[[n,!e.preloaderShow]])])]),t("tr",null,[He,t("td",Ne,[s(t("div",Ue,null,512),[[n,e.preloaderShow]]),s(t("p",null,d(e.details.weight),513),[[n,!e.preloaderShow]])])])])]),_:1})]),_:1})]),_:1}),o(_,null,{default:l(()=>[o(p,null,{default:l(()=>[e.CarBookModalBlock?(h(),f(B(e.CarBookModalBlock),{key:0,model_id:e.details.model_id},null,8,["model_id"])):b("",!0)]),_:1})]),_:1}),o(_,null,{default:l(()=>[o(p,null,{default:l(()=>[o(P,{car_id:e.details.model_id},null,8,["car_id"])]),_:1})]),_:1}),o(_,null,{default:l(()=>[o(p,null,{default:l(()=>[e.CommentsBlock?(h(),f(B(e.CommentsBlock),{key:0,model_id:e.details.model_id},null,8,["model_id"])):b("",!0)]),_:1})]),_:1})],64)}const qe=$(ne,[["render",Le],["__scopeId","data-v-cfd3ee47"]]);export{qe as default};
